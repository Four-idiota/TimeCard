<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Timecard </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 0;
            height: 100vh;
        }

        .transition-transform {
            transition: transform 0.3s ease;
        }

        .transition-transform:hover {
            transform: scale(1.05);
        }

        .status-indicator {
            display: inline-block;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .slide-up {
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .interactive-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .interactive-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .navigation-button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 0.375rem; /* Rounded corners */
            padding: 0.5rem 1rem; /* Padding */
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }

        .navigation-button:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }

        .navigation-button:disabled {
            background-color: #d6d6d6;
            cursor: not-allowed;
        }

        .nav-controls {
            display: none;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 0.375rem;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-controls.visible {
            display: flex;
        }

        .nav-controls .button-group {
            display: flex;
            gap: 0.5rem;
        }

        .nav-controls .button-group button {
            flex: 1;
        }

        .nav-controls .week-indicator {
            flex: 2;
            text-align: center;
            font-weight: bold;
            color: #007bff;
        }

        .status-section {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #fff;
            border-radius: 0.375rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .status-section .status-message {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .status-section .status-container {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 0.375rem;
            background-color: #f9f9f9;
        }

        .status-item {
            padding: 0.5rem;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="flex h-full">
        <div class="w-1/5 bg-white p-5 border-r border-gray-200 shadow-md overflow-y-auto">
            <header class="bg-blue-500 text-white p-5 rounded-lg mb-5 text-center">
                <h1 class="text-2xl font-bold">Timecard</h1>
            </header>

            <div class="bg-white p-5 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold text-blue-500 mb-3">Employee List</h2>
                <input type="text" id="employeeSearch" placeholder="Search employee..." class="w-full p-2 mb-3 border border-gray-300 rounded-lg">
                <ul id="employeeList" class="list-none p-0">
                    <!-- Employee list items will be dynamically inserted here -->
                </ul>
            </div>
        </div>

        <div class="w-4/5 p-5">
            <!-- Navigation Controls -->
            <div id="navControls" class="nav-controls">
                <button id="prevWeek" class="navigation-button" aria-label="Previous Week">&lt; Previous</button>
                <div class="week-indicator" id="weekIndicator">Week of...</div>
                <button id="nextWeek" class="navigation-button" aria-label="Next Week">Next &gt;</button>
            </div>

            <div class="flex overflow-x-auto space-x-4">
                <div class="timecard-container flex space-x-4" id="timecardContainer">
                    <!-- Timecards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Status Section -->
            <div class="status-section">
                <div class="status-message" id="statusMessage">Status:</div>
                <div class="status-container" id="statusContainer">
                    <!-- Status messages will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script>
    const employees = [
        { id: 1, name: 'John Doe' },
        { id: 2, name: 'Jane Smith' },
        { id: 3, name: 'Alice Johnson' },
        { id: 4, name: 'Bob Brown' }
    ];

    let currentWeekStartDate = new Date();
    const employeeList = document.getElementById('employeeList');
    const timecardContainer = document.getElementById('timecardContainer');
    const prevWeekButton = document.getElementById('prevWeek');
    const nextWeekButton = document.getElementById('nextWeek');
    const weekIndicator = document.getElementById('weekIndicator');
    const navControls = document.getElementById('navControls');
    const statusMessage = document.getElementById('statusMessage');
    const statusContainer = document.getElementById('statusContainer');

    function getWeekDates(startDate) {
        const start = new Date(startDate);
        const end = new Date(start);
        end.setDate(start.getDate() + 6); // Set end date to 6 days after start date

        const formatDate = date => {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}-${month}-${year}`;
        };

        return {
            start: formatDate(start),
            end: formatDate(end)
        };
    }

    function getStartOfWeek(date) {
        const day = date.getDay();
        const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust day to Monday
        return new Date(date.setDate(diff));
    }

    function createTimecardElement(employee, weekStart) {
        const wrapper = document.createElement('div');
        wrapper.className = 'bg-white p-4 rounded-lg shadow-md min-w-[300px] flex-shrink-0 interactive-card slide-up';

        const title = document.createElement('div');
        title.className = 'text-lg font-semibold text-blue-500 mb-2';
        title.innerHTML = `${employee.name}'s Timecard <i class="fas fa-calendar-week"></i>`;
        wrapper.appendChild(title);

        const { start, end } = getWeekDates(weekStart);
        const currentDate = document.createElement('div');
        currentDate.className = 'text-sm text-gray-600 mb-4';
        currentDate.innerText = `Week: ${start} - ${end}`;
        wrapper.appendChild(currentDate);

        const table = document.createElement('table');
        table.className = 'w-full border-collapse';

        const tableHeader = document.createElement('thead');
        tableHeader.innerHTML = `
            <tr class="bg-blue-500 text-white">
                <th class="border border-gray-200 px-4 py-2">Day</th>
                <th class="border border-gray-200 px-4 py-2">Status</th>
            </tr>
        `;
        table.appendChild(tableHeader);

        const tableBody = document.createElement('tbody');
        const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        daysOfWeek.forEach((day, index) => {
            const row = document.createElement('tr');
            row.className = 'hover:bg-gray-100';

            const dayDate = new Date(weekStart);
            dayDate.setDate(dayDate.getDate() + index);

            row.innerHTML = `
                <td class="border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700">${day}</td>
                <td class="border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 flex items-center">
                    <span class="status-indicator ${getStatusColor(day)}" title="${getStatusTooltip(day)}"></span>
                    ${getStatusText(day)}
                </td>
            `;
            tableBody.appendChild(row);
        });
        table.appendChild(tableBody);
        wrapper.appendChild(table);

        const buttonContainer = document.createElement('div');
        buttonContainer.className = 'mt-4 flex space-x-2';

        const approveBtn = document.createElement('button');
        approveBtn.className = 'bg-green-500 text-white py-2 px-4 rounded-lg flex items-center hover:bg-green-600 transition-transform';
        approveBtn.innerHTML = '<i class="fas fa-check mr-2"></i> Approve';
        buttonContainer.appendChild(approveBtn);

        const rejectBtn = document.createElement('button');
        rejectBtn.className = 'bg-red-500 text-white py-2 px-4 rounded-lg flex items-center hover:bg-red-600 transition-transform';
        rejectBtn.innerHTML = '<i class="fas fa-times mr-2"></i> Reject';
        buttonContainer.appendChild(rejectBtn);

        const reasonContainer = document.createElement('div');
        reasonContainer.className = 'mt-4 p-3 border border-gray-300 rounded-lg';

        reasonContainer.innerHTML = `
            <label for="reason" class="block text-sm font-medium mb-2">Reason for rejection:</label>
            <textarea id="reason" rows="4" placeholder="Enter reason..." class="w-full p-2 border border-gray-300 rounded-lg text-sm"></textarea>
        `;
        reasonContainer.classList.add('mt-4');

        wrapper.appendChild(buttonContainer);
        wrapper.appendChild(reasonContainer);

        approveBtn.addEventListener('click', () => {
            showStatusMessage('approved', `${employee.name}'s timecard has been approved successfully.`);
        });

        rejectBtn.addEventListener('click', () => {
            showStatusMessage('rejected', `${employee.name}'s timecard has been rejected. Please provide a reason.`);
        });

        return wrapper;
    }

    function getStatusColor(day) {
        const statusColors = {
            'Monday': 'bg-green-400',
            'Tuesday': 'bg-yellow-400',
            'Wednesday': 'bg-red-400',
            'Thursday': 'bg-blue-400',
            'Friday': 'bg-purple-400',
            'Saturday': 'bg-gray-400',
            'Sunday': 'bg-orange-400',
        };
        return statusColors[day] || 'bg-gray-300';
    }

    function getStatusText(day) {
        const statusText = {
            'Monday': 'Present',
            'Tuesday': 'Absent',
            'Wednesday': 'Comp Off',
            'Thursday': 'Paid Holiday',
            'Friday': 'Weekly Off',
            'Saturday': 'Outdoor Working',
            'Sunday': 'Outdoor Travelling',
        };
        return statusText[day] || 'Unknown';
    }

    function getStatusTooltip(day) {
        const statusTooltips = {
            'Monday': 'Employee present',
            'Tuesday': 'Employee absent',
            'Wednesday': 'Compensatory off',
            'Thursday': 'Paid holiday',
            'Friday': 'Weekly off',
            'Saturday': 'Outdoor working',
            'Sunday': 'Outdoor travelling',
        };
        return statusTooltips[day] || 'Unknown status';
    }

    function displayTimecards(employee) {
        timecardContainer.innerHTML = '';
        if (employee) {
            for (let weekNumber = 1; weekNumber <= 4; weekNumber++) {
                const timecardElement = createTimecardElement(employee, new Date(currentWeekStartDate));
                timecardContainer.appendChild(timecardElement);
                currentWeekStartDate.setDate(currentWeekStartDate.getDate() + 7); // Move to the next week
            }
            navControls.classList.add('visible');
        } else {
            navControls.classList.remove('visible');
        }
    }

    function updateWeekView(employee) {
        const startOfWeek = getStartOfWeek(new Date(currentWeekStartDate));
        const { start, end } = getWeekDates(startOfWeek);
        weekIndicator.innerText = `Week: ${start} - ${end}`;
        displayTimecards(employee);
        prevWeekButton.disabled = (currentWeekStartDate <= new Date());
        nextWeekButton.disabled = false; // Set conditions to disable if needed
    }

    function displayEmployees() {
        employeeList.innerHTML = '';
        employees.forEach(employee => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `${employee.name} <i class="fas fa-user"></i>`;
            listItem.dataset.id = employee.id;
            listItem.className = 'p-2 mb-2 cursor-pointer rounded-lg hover:bg-gray-200 transition-transform';
            listItem.addEventListener('click', () => {
                employeeList.querySelectorAll('.bg-blue-500').forEach(item => {
                    item.classList.remove('bg-blue-500');
                    item.classList.add('bg-white');
                    item.classList.remove('text-white');
                    item.classList.add('text-black');
                });

                listItem.classList.add('bg-blue-500', 'text-white');
                listItem.classList.remove('bg-white', 'text-black');
                const selectedEmployee = { id: listItem.dataset.id, name: listItem.innerText };
                currentWeekStartDate = getStartOfWeek(new Date());
                updateWeekView(selectedEmployee);
            });
            employeeList.appendChild(listItem);
        });
    }

    prevWeekButton.addEventListener('click', () => {
        currentWeekStartDate.setDate(currentWeekStartDate.getDate() - 7);
        const selectedEmployee = employeeList.querySelector('.bg-blue-500');
        if (selectedEmployee) {
            const employee = { id: selectedEmployee.dataset.id, name: selectedEmployee.innerText };
            updateWeekView(employee);
        }
    });

    nextWeekButton.addEventListener('click', () => {
        currentWeekStartDate.setDate(currentWeekStartDate.getDate() + 7);
        const selectedEmployee = employeeList.querySelector('.bg-blue-500');
        if (selectedEmployee) {
            const employee = { id: selectedEmployee.dataset.id, name: selectedEmployee.innerText };
            updateWeekView(employee);
        }
    });

    function showStatusMessage(statusType, message) {
        statusContainer.innerHTML = '';
        statusMessage.innerText = '';

        const statusItem = document.createElement('div');
        statusItem.className = `p-4 mb-4 rounded-lg text-white ${statusType === 'approved' ? 'bg-green-500' : 'bg-red-500'}`;
        statusItem.innerText = message;
        statusContainer.appendChild(statusItem);
    }

    document.addEventListener('DOMContentLoaded', () => {
        displayEmployees();
    });

    document.getElementById('employeeSearch').addEventListener('input', function() {
        const query = this.value.toLowerCase();
        employeeList.querySelectorAll('li').forEach(item => {
            const name = item.innerText.toLowerCase();
            item.style.display = name.includes(query) ? 'block' : 'none';
        });
    });

</script>

    
</html>
